@model ProductPropertiesModel.ViewModel

<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="col">
                <button class="btn btn-rounded btn-primary js-save-button" form="form">
                    <i class="fa-solid fa-floppy-disk"></i> Save
                </button>
            </div>
        </div>
    </div>
</div>
<div class="card">
    <div class="card-body">
        <form id="form" method="post" enctype="multipart/form-data">
            <div class="row">
                <div class="col form-group">
                    <label>Published?</label>
                    <label class="toggler toggler-lg">
                        <input type="checkbox" name="@nameof(Model.ProductIsPublished)" value="true" @(Model.ProductIsPublished ? Html.Raw("checked") : null) />
                        <i></i>
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="col-xl-6 form-group">
                    <label>Name</label>
                    <input type="text" name="@nameof(Model.ProductName)" class="form-control" value="@Model.ProductName" />
                    <div class="invalid-feedback"></div>
                </div>

                <div class="col-xl-6 form-group">
                    <label>Price</label>
                    <input name="@nameof(Model.ProductPrice)" class="form-control js-product-price-input" value="@Model.ProductPriceString" />
                    <div class="invalid-feedback"></div>
                </div>
            </div>
            <div class="row">
                <div class="col-xl-6 form-group">
                    <label>Category</label>
                    <select class="form-select" name="@nameof(Model.CategoryID)">
                        <option></option>
                        @if (Model.HasCategories)
                        {
                            foreach (var item in Model.Categories)
                            {
                                <option value="@item.Key" @(item.IsSelected ? Html.Raw("selected") : null)>
                                    @Html.Raw(item.Value)
                                </option>
                            }
                        }
                    </select>
                    <div class="invalid-feedback"></div>
                </div>

                <div class="col-xl-6 form-group">
                    <label>Upload Image</label>
                    <div class="input-group custom-file-group js-custom-file-upload">
                        <div class="form-control">
                            <a class="js-custom-file-upload-attachment" data-type="image" href="@Html.Raw(Model.ProductCoverImageHttpPath)">
                                @Html.Raw(Model.ProductCoverImageFileName)
                            </a>
                            <span class="js-custom-file-upload-new-attachment hidden"></span>
                        </div>

                        @if (Model.HasProductCoverImageFileName)
                        {
                            <button type="button"
                                    data-url="@Html.Raw(Model.UrlDeleteImage)"
                                    data-text-confirm="@Html.Raw(Model.TextConfirmDelete)"
                                    class="btn btn-outline-light js-custom-file-upload-delete-button">
                                <i class="fa-light fa-trash-can"></i>
                            </button>
                        }

                        <button type="button"
                                class="btn btn-outline-light hidden js-custom-file-upload-clear-button">
                            <i class="fa fa-times"></i>
                        </button>

                        <span class="btn btn-outline-light custom-file-upload">
                            <i class="fa fa-folder-open"></i>
                            <input type="file" name="@nameof(Model.ProductCoverImage)" accept="image/*" />
                        </span>
                    </div>
                </div>

            </div>

        </form>
    </div>
</div>

@section FooterSection {
    <script src="~/js/admin/products/productpropertiesview.js"></script>
    @if (Model.HasErrors)
    {
        @if (Model.HasFormErrors)
        {
            <script>
                validation.init({ errorsJson: @Html.Raw(Model.FormErrorsJson) }).showErrors();
            </script>
        }
        @if (Model.HasToastError)
        {
            <script>
                successErrorToast63Bits.init({isError:true,message:'@Html.Raw(Model.ToastError)'}).showMessage();
            </script>
        }
    }
}
